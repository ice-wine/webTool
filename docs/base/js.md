# JS

## 简介
### 组成

- **ECMAScript**（核心）：提供核心语言功能。包括变量、表达式、运算符、函数、if语句、for语句等

- **DOM**（文档对象模型）：提供访问和操作网页内容的方法和接口。比如让盒子移动、变色、改变大小、轮播图等

- **BOM**（浏览器对象模型）：提供与浏览器交互的方法和接口。浏览器窗口，比如弹框、控制浏览器跳转、获取浏览器分辨率等

### 特点

- 解释型语言

- 单线程

- ECMAScript标准（ES）

### 引用

- 行内式

- 内嵌式

- 引入外部的 JS 文件

## 变量

### 概念

在程序在内存中用于存放数据的容器的空间。通过变量名获取数据，修改数据。

### 数据类型

JavaScript 是一种「弱类型语言」或「动态语言」。变量的数据类型，是在程序运行的过程中，根据等号右边的值来确定的。

- **基本数据类型**（值类型）：String 字符串、Number 数值、Boolean 布尔值、Null 空值、Undefined 未定义

- **引用数据类型**（引用类型）：Object 对象

tips：内置对象 Function、Array、Date、RegExp、Error等都是属于 Object 类型

**区别**

基本类型：传数值，因为变量直接保存在栈内存，独立存在

引用类型：传地址，因为对象是保存在堆内存，变量保存了对象的内存地址（对象的引用），保存在栈内存当中

#### # 字符串：String

**转义字符**：加' \\ '。如：\n 表示换行。n 的意思是 newline

1个字符：1个中文，1个英文，1个标点符号，1个空格

**字符串拼接**：ES6 模板字符串（模板字面量），可使用变量，表达式，函数，嵌套等

**不可变性**：值改变了，其实是地址变了，内存中新开辟了一个内存空间
#### # 数值型：Number

**Infinity**：变量超过了最大值。typeof Infinity 返回结果是number

**NaN**：Not a Number，非数值。typeof NaN 返回结果是 number

**隐式转换**：`-`、`*`、`/`、`%`这几个符号会自动进行隐式转换；

`+` 如果加号两边都是 Number 类型，此时是数字相加。否则，就是连字符（用来连接字符串）

```js
"2" + 1  ==>  "21"  

"2" - 1 ==> 1
```

**浮点数运算**：会有精度问题，`toFix()` 进行小数的截取，计算开源库：Math.js，decimal.js
#### # Null：空对象

Null 类型的值只有一个，就是 null

```js
let myObj = null;
cosole.log(typeof myObj); // 打印结果：object，null 代表的是空对象
```

#### # Undefined：未定义

- 变量已声明，未赋值时

    ```js
    let name;
    console.log(name); // 打印结果：undefined
    console.log(typeof name); // 打印结果：undefined
    ```

- 变量未声明（未定义）时

- 函数无返回值时

    ```js
    function foo() {}
    console.log(foo()); // 打印结果：undefined
    ```

- 调用函数时，未传参

    ```js
    function foo(name) {
        console.log(name);
    }
    foo(); // 调用函数时，未传参。执行函数后的打印结果：undefined
    ```

- 任何数据类型和 undefined 运算都是 NaN

- 任何值和 null 运算，null 可看做 0 运算

    ```js
    null == undefined // true
    null === undefined // false

    1 + undefined // NaN
    1 + null // 1
    1 + NaN //NaN
    ```

#### # 数据类型转换

**typeof 运算符**：获取变量的数据类型

- 显示类型转换

   toString()、String()、Number()、parseInt(string)、parseFloat(string)、Boolean()

- 隐式类型

   - isNaN()

   - 自增/自减运算符：`++`、`—-`

   - 正号/负号：`+a`、`-a`

   - 加号：`+`

   - 运算符：`-`、`*`、`/`

- 隐式类型转换（特殊）

   - 逻辑运算符：`&&`、`||`、`！`

   - 关系运算符：`<`、`>`、`<=`、`>=`等

### 声明 & 赋值

**定义**

```js
// ES5
var name; 
// ES6
const name; // 定义常量
let age;
```

**赋值 & 初始化**

```js
// ES5
var a = 100; 
// ES6
const B = hello; 
let b = world; 
```

**声明多个变量**

```js
var name = '测试', age = 27, number = 100;
```

**命名规范**

- 由字母、数字、下划线( _ )、美元符( $ )组成，不能以数字开头，不允许出现空格

- 不用使用 JS 语言中保留的「关键字」和「保留字」作为变量名

- 变量名区分大小写，长度不能超过255个字符，建议用驼峰命名规则

## 运算符

定义：也叫操作符，是一种符号。通过运算符可以对一个或多个值进行运算，并获取运算结果

表达式：由数字、运算符、变量的组合（组成的式子）

### 分类

- 算数运算符：执行两个变量或值的算术运算

- 自增/自减运算符

- 一元运算符：typeof、正号 +、负号 -

- 逻辑运算符：&&、||、！

  非布尔值进行与或运算时，会先将其转换为布尔值，然后再运算，但返回结果是原值

- 赋值运算符

- 比较运算符

- 三元运算符（条件运算符）

## 流程控制

### 选择

if、swicth

### 循环

for、while

    ```js
    for(①初始化表达式; ②条件表达式; ④更新表达式){
        ③语句...
    } // 1 -> 2 -> (3->4->2)/结束
    ```

**break**

- 退出 switch 或退出整个循环

- 立即终止离它最近的那个循环语句

- 结束指定的循环，可以为循环语句创建一个 label 标签，来标识当前的循环，格式（label:循环语句）

    ```js
    outer: for (var i = 0; i < 5; i++) {
        console.log('外层循环 i 的值：' + i);
        for (var j = 0; j < 5; j++) {
            break outer; // 直接跳出outer所在的外层循环（这个outer是我自定义的label）
            console.log('内层循环 j 的值:' + j);
        }
    } // 外层循环 i 的值：0
    ```

**continue**

- 跳过当次循环，继续下一次循环

- 作用于最近的循环

- 跳过指定的当次循环，可以使用 label 标签

## 对象

### 概念

对象是一组无序的相关**属性**和**方法**的集合，用来**封装信息**，具有特征（属性）和行为（方法）
### 分类

- 内置对象：ES标准中定义的对象。Object、Math、Date、String、Boolean、Function等

- 宿主对象：由JS的运行环境提供的对象，主要指由浏览器提供的对象。BOM、DOM（console、document）

- 自定义对象：通过 new 关键字创建出来的对象实例。

### 基本包装类型

将**基本数据类型**的数据转换为对应类型**对象**

- String()

- Number()

- Boolean()

## 数组

数组是属于内置对象

### 创建

- 字面量  

    ```js 
    var arr2 = [1, 2, 3]; // 创建带初始值的数组
    ```
 
- 构造函数  

    ```js
    let arr = new Array(参数);
    // 参数为空：创建一个空数组
    // 参数为一个数值：表示数组的长度
    // 多个参数：表示数组中的元素
    ```
### 数组的类型相关方法

| 方法                              | 描述                               | 备注 |
| :------------------------------- | :--------------------------------- | :--- |
| Array.isArray()                  | 判断是否为数组                     |      |
| toString()                       | 将数组转换为字符串                 |      |
| Array.from(arrayLike)            | 将**伪数组**转化为**真数组**       |  ES6 |
| Array.of(value1, value2, value3) | 创建数组：将**一系列值**转换成数组 |      |

注意，获取数组的长度是用`length`属性，不是方法

### 数组元素的添加和删除

| 方法       | 描述                                                              | 备注           |
| :-------- | :-----------------------------------------------------------------| :------------- |
| push()    | 向数组的**最后面**插入一个或多个元素，返回结果为新数组的**长度**            | 会改变原数组   |
| unshift() | 在数组**最前面**插入一个或多个元素，返回结果为新数组的**长度**              | 会改变原数组   |
| pop()     | 删除数组中的**最后一个**元素，返回结果为**被删除的元素**                   | 会改变原数组   |
| shift()   | 删除数组中的**第一个**元素，返回结果为**被删除的元素**                     | 会改变原数组   |
| splice()  | 从数组中**删除**指定的一个或多个元素，返回结果为**被删除元素组成的新数组**    | 会改变原数组   |
| slice()   | 从数组中**提取**指定的一个或多个元素，返回结果为**新的数组**                | 不会改变原数组 |
| fill()    | 填充数组：用固定的值填充数组，返回结果为**新的数组**                       | 不会改变原数组 |

### 数组的合并和拆分

| 方法     | 描述                                                 | 备注             |
| :------- | :--------------------------------------------------- | :--------------- |
| concat() | 合并数组：连接两个或多个数组，返回结果为**新的数组** | 不会改变原数组   |
| join()   | 将数组转换为字符串，返回结果为**转换后的字符串**     | 不会改变原数组   |
| split()  | 将字符串按照指定的分隔符，组装为数组                 | 不会改变原字符串 |

注意，`split()`是字符串的方法，不是数组的方法。

### 数组排序

| 方法      | 描述                                              | 备注         |
| :-------- | :------------------------------------------------| :----------- |
| reverse() | 反转数组，返回结果为**反转后的数组**                  | 会改变原数组 |
| sort()    | 对数组的元素,默认按照**Unicode 编码**，从小到大进行排序 | 会改变原数组 |

### 查找数组的元素

| 方法                  | 描述                                                                 | 备注                                                     |
| :-------------------- | :------------------------------------------------------------------| :------------------------------------------------------- |
| indexOf(value)        | 从前往后索引，检索一个数组中是否含有指定的元素                             |                                                          |
| lastIndexOf(value)    | 从后往前索引，检索一个数组中是否含有指定的元素                             |                                                          |
| includes(item)  | 数组中是否包含指定的内容                                                     |                                                        |
| find(function())      | 找出**第一个**满足「指定条件返回 true」的元素                            |                                                          |
| findIndex(function()) | 找出**第一个**满足「指定条件返回 true」的元素的 index                     |                                                          |
| every()               | 确保数组中的每个元素都满足「指定条件返回 true」，则停止遍历，此方法才返回 true | 全真才为真。要求每一项都返回 true，最终的结果才返回 true |
| some()                | 数组中只要有一个元素满足「指定条件返回 true」，则停止遍历，此方法就返回 true   | 一真即真。只要有一项返回 true，最终的结果就返回 true     |

### 遍历数组

| 方法      | 描述                                                          | 备注                                               |
| :-------- | :----------------------------------------------------------- | :------------------------------------------------ |
| for 循环  | 这个大家都懂                                                   |                                                   |
| forEach() | 和 for 循环类似，但需要兼容 IE8 以上                             | forEach() 没有返回值。也就是说，它的返回值是 undefined |
| map()     | 对原数组中的每一项进行加工，将组成新的数组                          | 不会改变原数组                                     |
| filter()  | 过滤数组：返回结果是 true 的项，将组成新的数组，返回结果为**新的数组** | 不会改变原数组                                     |
| reduce    | 接收一个函数作为累加器，返回值是回调函数累计处理的结果                |                                                  |

### Tips

总结：

- 只遍历数组，用forEach()方法

- 在遍历同时，需改变元素内容，最好是用map()方法来做，避免出现一些低级错误

**forEach(item, index, arr)**

- 元素是**基本**数据类型 - **无法改变**原数组

- 元素是**引用**数据类型

   - 修改**整个元素**对象时 - **无法改变**原数组
   - 修改元素对象里的**某个属性**时 - **可以改变**原数组

- 通过 arr[index] **修改原数组** （标准做法）

**map(item, index, arr)**

对数组中每一项运行**回调函数**，返回函数结果，组成新数组（返回加工后的**新数组**），**不会改变**原数组

**filter(item, index, arr)**

对数组中的每一项运行**回调函数**，该函数结果是true的项，组成新的数组（返回值就是**新数组**），**不会改变**原数组。

## 函数

函数：将一些功能或语句进行**封装**，也是一个**对象**，typeof 返回function

作用：简化编程，让编程模块化。高内聚、低耦合

### 定义/声明

- 命名函数（函数关键字）

    ```js
    function 函数名([形参1,形参2...形参N]){  
        语句...
    }
    // 函数名：字母、数字、下划线、美元符号，不能以数字开头。
    // 参数：可选
    ```

- 匿名函数（函数表达式）

    ```js
    var 变量名  = function([形参1,形参2...形参N]){
        语句....
    }
    ```

- 构造函数 new Function()

    ```js
    var 变量名/函数名  = new Function('形参1', '形参2', '函数体');
    ```

总结：所有的函数，都是 Fuction 的“实例”（或者说是“实例对象”）。本质上都是通过 new Function 得到的，函数也属于“对象”

### 调用

- 普通函数调用

  - 函数名()

  - 函数名.call()

- 通过对象的方法来调用

    ```js
    var obj = {
        a: '测试',
        fn2: function() {
            console.log('我是对象的方法');
        },
    };

    obj.fn2(); // 调用函数
    ```

- 立即执行函数（在定义后，会自动调用）

    ```js
    (function() {
        console.log('我是立即执行函数');
    })();
    ```

- 通过构造函数来调用

    ```js
    function Fun3() {
        console.log('我是构造函数');
    }

    new Fun3();
    ```

- 绑定事件函数

    ```js
    let btn = document.getElementById('btn');
    // 绑定事件
    btn.onclick = function() {
        console.log('点击按钮后，要做的事情');
    };
    ```
- 定时器函数

    ```js
    let num = 1;
    setInterval(function () {
        num ++;
        console.log(num);
    }, 1000);
   ```

### 返回值

- 结束方法（终止函数）

- return; 和 无return，相当于返回undefined

- 返回值可以任意数据类型，对象 或 函数，多个值逗号隔开，仅取最后一个值

### 函数名、函数体和函数加载问题

**函数名 == 整个函数**

